<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="mobile-web-app-capable" content="yes">
<title>ドライブバディ - 記録再生中</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>
<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        'primary-green': '#00bcd4',
        'danger-red': '#f44336',
        'bg-light': '#d8f5e3',
        'card-light': '#aafaff'
      },
      fontFamily: {
        sans: ['"Hiragino Maru Gothic ProN"', 'sans-serif']
      }
    }
  }
}
</script>
</head>
<body class="bg-bg-light text-gray-800 font-sans flex flex-col items-center justify-center min-h-screen p-4">

  <h1 class="text-3xl font-bold text-primary-green mb-6">記録中</h1>

  <!-- キャラアイコン -->
  <div class="w-36 h-36 rounded-full bg-white shadow-md flex items-center justify-center overflow-hidden mb-6">
    <img src="{{ url_for('static', filename='img/robot_active.png') }}" alt="ロボット" class="object-cover w-full h-full">
  </div>

  <!-- 情報ボックス -->
  <div class="flex justify-center gap-6 mb-6">
    <div class="bg-card-light rounded-lg px-6 py-3 shadow">
      <p class="text-sm text-gray-700">速度</p>
      <p class="text-2xl font-bold"><span id="speed">0.0</span> km/h</p>
    </div>
    <div class="bg-card-light rounded-lg px-6 py-3 shadow text-center">
      <p class="text-sm text-gray-700">記録時間</p>
      <p class="text-2xl font-bold" id="timer">00:00</p>
    </div>
  </div>

  <!-- G値 -->
  <div class="bg-card-light rounded-lg p-4 text-gray-800 shadow mb-8 w-72 text-center">
    横G：<span id="g-x">0.00</span>
    前後G：<span id="g-z">0.00</span>
    上下G：<span id="g-y">0.00</span>
  </div>

  <!-- 停止ボタン -->
  <button id="StopBtn"
          class="bg-danger-red text-white text-xl font-bold py-3 px-10 rounded-xl shadow-lg hover:bg-red-500 transition">
    記録を終了する
  </button>

  <script>
    window.isReplayMode = true;
    window.replaySessionId = "{{ session_id }}";
    window.replayStart = "{{ start }}";
    window.replayEnd = "{{ end }}";
    window.replaySessionStart = "{{ session_start or 0 }}";
  </script>

  <script src="{{ url_for('static', filename='pin_utils.js') }}"></script>
  <script type="module" src="{{ url_for('static', filename='replay.js') }}"></script>

</body>
</html>
